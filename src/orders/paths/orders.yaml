post:
  summary: Create Order
  description: Create an Order for an Account
  tags:
    - Order
  parameters:
    - $ref: ../../shared/parameters/AccountID.yaml
    - $ref: ../../shared/parameters/AcceptDatetimeFormat.yaml
  requestBody:
    required: true
    content:
      application/json:
        schema:
          type: object
          properties:
            order:
              $ref: '../types/OrderRequest.yaml'
  responses:
    201:
      description: The Order was created as specified
      headers:
        Location:
          $ref: ../../shared/headers/Location.yaml
        RequestID:
          $ref: ../../shared/headers/RequestID.yaml
      content:
        application/json:
          schema:
            allOf:
              - type: object
                properties:
                  orderCreateTransaction:
                    $ref: ../../transactions/types/shared/Transaction.yaml
                  orderFillTransaction:
                    $ref: ../../transactions/types/order/fill/OrderFillTransaction.yaml
                  orderCancelTransaction:
                    $ref: ../../transactions/types/order/cancel/OrderCancelTransaction.yaml
                  orderReissueTransaction:
                    $ref: ../../transactions/types/shared/Transaction.yaml
                  orderReissueRejectTransaction:
                    $ref: ../../transactions/types/shared/Transaction.yaml
              - $ref: ../../shared/errors/helpers/4xxTransactionError.yaml
    400:
      description: The Order specification was invalid
      headers:
        RequestID:
          $ref: ../../shared/headers/RequestID.yaml
      content:
        application/json:
          schema:
            allOf:
              - type: object
                properties:
                  orderRejectTransaction:
                    $ref: ../../transactions/types/shared/Transaction.yaml
              - $ref: ../../shared/errors/helpers/4xxTransactionError.yaml
    401:
      $ref: ../../shared/errors/401.yaml
    403:
      $ref: ../../shared/errors/403.yaml
    404:
      description: The Order or Account specified does not exist.
      headers:
        RequestID:
          $ref: ../../shared/headers/RequestID.yaml
      content:
        application/json:
          schema:
            allOf:
              - type: object
                properties:
                  orderRejectTransaction:
                    $ref: ../../transactions/types/shared/Transaction.yaml
              - $ref: ../../shared/errors/helpers/4xxTransactionError.yaml
    405:
      $ref: ../../shared/errors/405.yaml
get:
  summary: List Orders
  description: Get a list of Orders for an Account
  tags:
    - Order
  parameters:
    - $ref: ../../shared/parameters/AccountID.yaml
    - $ref: ../../shared/parameters/AcceptDatetimeFormat.yaml
    - name: ids
      description: List of Order IDs to retrieve
      in: query
      schema:
        type: array
        items:
          type: integer
      style: form
      explode: false
    - name: state
      description: The state to filter the requested Orders by
      in: query
      schema:
        type: string
    - name: instrument
      description: The instrument to filter the requested orders by
      in: query
      schema:
        $ref: ../../instruments/types/InstrumentName.yaml
    - name: count
      description: The maximum number of Orders to return
      in: query
      schema:
        type: integer
    - name: beforeID
      description: The maximum Order ID to return. If not provided the most recent Orders in the Account are returned
      in: query
      schema:
        type: integer
  responses:
    200:
      description: The list of Orders requested
      headers:
        Link:
          $ref: ../../shared/headers/Link.yaml
        RequestID:
          $ref: ../../shared/headers/RequestID.yaml
      content:
        application/json:
          schema:
            type: object
            properties:
              orders:
                description: The list of Order detail objects
                type: array
                items:
                  $ref: '../types/Order.yaml'
              lastTransactionID:
                description: The ID of the most recent Transaction created for the Account
                type: integer
    400:
      $ref: ../../shared/errors/400.yaml
    404:
      $ref: ../../shared/errors/404.yaml
    405:
      $ref: ../../shared/errors/405.yaml